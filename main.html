<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>B&S Polska</title>
    <link rel="icon" href="img/bspolska.png">
    <meta name="description" content="">
    <!-- <link rel="stylesheet" href="css/reset.css"> -->
    <link rel="stylesheet" href="css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.0.0/papaparse.min.js"></script>
</head>
<body>
    
  <header>
      <div class="logo"><img src="img\bspolska.png" class="logo"></div>
      <nav>
          <a href="#about">O nas</a>
          <a href="#portfolio">Portfolio</a>
          <a href="#buy">Gdzie kupić</a>
          <a href="#contact">Kontakt</a>
      </nav>
  </header>
    
  <div class="hero">
      <img src="img\bspolska.png" class="logo">
      <p>daj jakieś hasło reklamowe kiedyś</p>
      <a href="#portfolio" class="hero-cta">Przeglądaj marki</a>
  </div>

  <section id="about" class="about">
      <h2>O nas</h2>
      <p>Sklep oferuje dobrej jakości i w umiarkowanych cenach tekstylia szkolne. Jest wieloletnim, doświadczonym i rzetelnym dostawcą marek licencyjnych jak i własnych.</p>
  </section>


<section id="brands">
  <h2>Nasze Portfolio</h2>
  <div class="brand-grid">
    <p class="loading">Ładowanie marek...</p>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const gridContainer = document.querySelector('.brand-grid');

      // Funkcja slugify (bezpieczne URL)
      function slugify(text) {
          const map = {
          'ą':'a','ć':'c','ę':'e','ł':'l','ń':'n',
          'ó':'o','ś':'s','ź':'z','ż':'z',
          'Ą':'a','Ć':'c','Ę':'e','Ł':'l','Ń':'n',
          'Ó':'o','Ś':'s','Ź':'z','Ż':'z'
          };
        return String(text || '')
          .normalize("NFD").replace(/[\u0300-\u036f]/g, "") // pozostałe akcenty
          .replace(/[ąćęłńóśźżĄĆĘŁŃÓŚŹŻ]/g, m => map[m] || m) // zamiana PL znaków
          .toLowerCase()
          .replace(/\s+/g, '-')            // spacje → -
          .replace(/[^\w-]+/g, '')         // inne znaki
          .replace(/--+/g, '-')            // wielokrotne - do jednego
          .replace(/^-+|-+$/g, '');        // usunięcie - z początku/końca
      }

      // Walidacja kolorów
      function isValidColor(str) {
        const s = new Option().style;
        s.color = str;
        return s.color !== '';
      }

      // Nowa funkcja do tworzenia kafelka (przeniesiona z Twojego kodu dla lepszej organizacji)
      function createBrandTile(row) {
        if (!row.name) return null; // pomijamy wiersze bez nazwy

        const tile = document.createElement('a');
        tile.className = 'brand-tile';

        // Generowanie linku na podstawie sluga
        const slug = slugify(row.name) || 'unknown';
        tile.href = `brand.html?brand=${encodeURIComponent(slug)}`;
        tile.setAttribute("aria-label", row.name);
        tile.setAttribute('title', `Przejdź do listy produktów marki ${row.name}`);

        // Ustawienie kolorów z fallbackami
        tile.style.setProperty('--color1', row.color1 && isValidColor(row.color1) ? row.color1 : '#f9f9f9');
        tile.style.setProperty('--color2', row.color2 && isValidColor(row.color2) ? row.color2 : '#f9f9f9');
        tile.style.setProperty('--color3', row.color3 && isValidColor(row.color3) ? row.color3 : '#f9f9f9');


        // Nazwa marki
        const nameSpan = document.createElement('span');
        nameSpan.textContent = row.name;
        tile.appendChild(nameSpan);

        return tile;
      }

      // Zaktualizowana funkcja loadBrands (z Twojej propozycji, zintegrowana z logiką tworzenia kafelków)
      async function loadBrands() {
        const gridContainer = document.querySelector('.brand-grid'); // Przeniesione tutaj dla spójności

        try {
          const response = await fetch('brands.csv');
          if (!response.ok) throw new Error('Nie udało się załadować pliku CSV');

          const text = await response.text();
          const results = Papa.parse(text, { header: true, skipEmptyLines: true });

          if (results.errors.length > 0) {
            throw new Error('Błąd parsowania CSV: ' + results.errors[0].message);
          }

          gridContainer.innerHTML = ''; // Wyczyszczenie "Ładowanie..."

          const fragment = document.createDocumentFragment();

          results.data.forEach(row => {
            const tile = createBrandTile(row);
            if (tile) fragment.appendChild(tile);
          });

          gridContainer.appendChild(fragment);
        } catch (error) {
          console.error('Błąd:', error);
          gridContainer.innerHTML = '<p>❌ Nie udało się załadować marek.</p>';
        }
      }

      // Wywołanie funkcji bezpośrednio (zamiast drugiego listenera)
      loadBrands();
    });
  </script>
</section>

<section id="carousel">
  <div class="logo-carousel">
    <div class="logo-track" id="logoTrack"></div>
  </div>
  <script>
    const LOGOS = [
      "https://upload.wikimedia.org/wikipedia/en/6/6d/Legia_Warsaw_logo.svg",
      "img/1SO logo.jpg",
      "https://football-logos.cc/logos/poland/700x700/lech-poznan.png",
      "img/TE logo.jpg",
      "https://upload.wikimedia.org/wikipedia/de/8/81/Pogon_Szczecin.svg",
    ];

    // Duplikujemy logo aby płynnie zapętlić przesuwanie
    const carousel = document.getElementById('logoTrack');
    const wrapper = carousel.parentNode;

    function fillLogos() {
      const baseLogos = [...LOGOS];
      carousel.innerHTML = '';
      let repetitions = 2;
      do {
        baseLogos.forEach(src => {
          const img = document.createElement('img');
          img.src = src;
          carousel.appendChild(img);
        });
        repetitions++;
      } while (carousel.scrollWidth < wrapper.offsetWidth * 2); // powielamy aż "tor" jest dużo dłuższy od widoku
    }
    fillLogos();

    // Płynne przesuwanie
    let position = 0;
    const speed = 1.2; // px na klatkę (zmień w razie potrzeby)
    let speedLocked = false;

    function animate() {
      if (!speedLocked) position -= speed;
      const logoWidth = carousel.scrollWidth / 2;
      if (Math.abs(position) >= logoWidth) position = 0;
      carousel.style.transform = `translateX(${position}px)`;
      requestAnimationFrame(animate);
    }

    // Obsługa zatrzymania na hover
    carousel.parentNode.addEventListener('mouseenter', () => speedLocked = true);
    carousel.parentNode.addEventListener('mouseleave', () => speedLocked = false);

    animate();
  </script>
</section>





<!-- 
    <section id="portfolio" class="portfolio">
        <h2>Portfolio marki</h2>
        <div class="portfolio-grid">
            <a href="brand_Legia_Warszawa.html"><img src="https://upload.wikimedia.org/wikipedia/en/6/6d/Legia_Warsaw_logo.svg" alt="Legia Warszawa"></a>
            <a href="brand4.html"><img src="https://football-logos.cc/logos/poland/700x700/lech-poznan.png" alt="Lech Poznań"></a>
            <a href="brand2.html"><img src="https://via.placeholder.com/150" alt="Brand 2"></a>
            <a href="brand3.html"><img src="https://via.placeholder.com/150" alt="Brand 3"></a>
            <a href="brand4.html"><img src="https://via.placeholder.com/150" alt="Brand 4"></a>
        </div>
    </section> -->

    <section id="buy" class="buy">
        <h2>Gdzie można nas spotkać</h2>
        <div class="buy-links">
            <span class="container"><a href="https://allegro.pl/uzytkownik/BandSPolska" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Allegro.pl_sklep.svg" alt="Allegro"></a></span>
            <span class="container"><a href="https://www.empik.com/sklepy/b-s-polska,3078,m" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/Empik.svg/330px-Empik.svg.png" alt="Empik"></a></span>
            <span class="container"><a href="https://erli.pl/sklep/BandSPolska/33689" target="_blank"><img src="https://erli.pl/sprzedawcy/assets/images/logo-shop.svg" alt="Erli"></a></span>
            <span class="container"><a href="https://www.kaufland.pl/shops/BandSPolska/" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/4/40/Kaufland_2016_horizontal.svg" alt="Kaufland"></a></span>
            <span class="container" id="cont" target="_blank"><a href="https://www.olx.pl/oferty/uzytkownik/1PcRlD/"><img src="https://upload.wikimedia.org/wikipedia/commons/9/9b/OLX_2019.svg" alt="OLX"></a></span>
            <span class="container"><a href="https://www.amazon.pl/s?me=A10IUM9O23CD0Y&marketplaceID=A1C3SOZRARQ6R3" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon"></a></span>
            <span class="container"><a href="https://arena.pl/sprzedawca/b_and_s_polska/sklep" target="_blank"><img src="https://arena.pl/dist/img/logo-arena.svg" alt="arena"></a></span>
        </div>
    </section>

    <footer id="contact">
        <div class="contact">
            <h4>Kontakt</h4>
            <p>Email: kontakt@twojsklep.pl</p>
            <p>Telefon: 123-456-789</p>
        </div>
        <div class="address">
            <h4>Adres</h4>
            <p>Ul. Batorego 3, 05-083 Topolin</p>
        </div>
    </footer>
</body>
</html>
